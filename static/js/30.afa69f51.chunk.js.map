{"version":3,"file":"static/js/30.afa69f51.chunk.js","mappings":"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","sources":["components/errorBoundary/ErrorBoundary.js","components/comicsList/ComicsList.js","components/pages/ComicsPage.js"],"sourcesContent":["import { Component } from \"react\";\r\n\r\nimport ErrorMessage from \"../errorMessage/ErrorMessage\";\r\n\r\nclass ErrorBoundary extends Component {\r\n    state = {\r\n        error: false\r\n    }\r\n\r\n    componentDidCatch(error, info) {\r\n        console.log(error, info);\r\n        this.setState({\r\n            error: true\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if (this.state.error) {\r\n           return <ErrorMessage/>\r\n        }\r\n        return this.props.children;    \r\n    }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport useMarvelService from '../../services/MarvelService';\r\nimport Spinner from '../spinner/Spinner';\r\nimport ErrorMessage from '../errorMessage/ErrorMessage';\r\n\r\nimport './comicsList.scss';\r\n\r\nconst setContent = (process, Component, newItemLoading) => {\r\n    switch(process) {\r\n        case 'waiting':\r\n            return <Spinner/>;\r\n        case 'loading': \r\n            return newItemLoading ? <Component/> : <Spinner/>; \r\n        case 'confirmed':\r\n            return <Component/>;\r\n        case 'error':\r\n            return <ErrorMessage/>;\r\n        default:\r\n            throw new Error('Unexpected process state');\r\n    }\r\n}\r\n\r\nconst ComicsList = () => {\r\n    const [comicsList, setComicsList] = useState([]);\r\n    const [newItemLoading, setNewItemLoading] = useState(false);\r\n    const [offset, setOffset] = useState(0);\r\n    const [comicsEnded, setComicsEnded] = useState(false);\r\n\r\n    const {process, setProcess, getAllComics} = useMarvelService();\r\n\r\n    useEffect(() => {\r\n        request(offset, true);\r\n    }, [])\r\n\r\n    const request = (offset, initial) => {\r\n        initial ? setNewItemLoading(false) : setNewItemLoading(true);\r\n        getAllComics(offset)\r\n            .then(comicsListLoaded)\r\n            .then(() => setProcess('confirmed'))\r\n    }\r\n\r\n    const comicsListLoaded = (newComicsList) => {\r\n        let ended = false;\r\n        if (newComicsList.length < 8) {\r\n            ended = true;\r\n        }\r\n\r\n        setComicsList((comicsList) => [...comicsList, ...newComicsList]);\r\n        setNewItemLoading(false);\r\n        setOffset((offset) => offset + 8);\r\n        setComicsEnded(ended);\r\n    }\r\n\r\n    const renderComicsItems = (comicsList) => {\r\n        const items = comicsList.map(({thumbnail, title, price, id}, i) => {\r\n            const imgStyle = (thumbnail === 'http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg') ? {objectFit: \"fill\"} : {objectFit: \"cover\"};\r\n\r\n            return (\r\n                <li className=\"comics__item\" key={i}>\r\n                    <Link to={`/comics/${id}`}>\r\n                        <img src={thumbnail} alt=\"title\" className=\"comics__item-img\" style={imgStyle}/>\r\n                        <div className=\"comics__item-name\">{title}</div>\r\n                        <div className=\"comics__item-price\">{price}</div>\r\n                    </Link>\r\n                </li>\r\n            )\r\n        })\r\n\r\n        return (\r\n            <ul className=\"comics__grid\">\r\n               {items}\r\n            </ul>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"comics__list\">\r\n            {setContent(process, () => renderComicsItems(comicsList), newItemLoading)}\r\n            <button className=\"button button_main button_long\"\r\n                disabled={newItemLoading}\r\n                style={{'display': comicsEnded ? 'none' : 'block'}}\r\n                onClick={() => request(offset)}>\r\n                <div className=\"inner\">load more</div>\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ComicsList;\r\n","import { Helmet } from 'react-helmet';\r\n\r\nimport AppBanner from '../appBanner/AppBanner';\r\nimport ErrorBoundary from '../errorBoundary/ErrorBoundary';\r\nimport ComicsList from '../comicsList/ComicsList';\r\n\r\nconst ComicsPage = () => {\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <meta\r\n                    name=\"description\"\r\n                    content=\"Page with list of our comics\"\r\n                 />\r\n                <title>Comics page</title>\r\n            </Helmet>\r\n            <AppBanner />\r\n            <ErrorBoundary>\r\n                <ComicsList/>\r\n            </ErrorBoundary>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ComicsPage;\r\n"],"names":["ErrorBoundary","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","state","error","_createClass","key","value","info","console","log","this","setState","_jsx","ErrorMessage","props","children","Component","setContent","process","newItemLoading","Spinner","Error","_useState","useState","_useState2","_slicedToArray","comicsList","setComicsList","_useState3","_useState4","setNewItemLoading","_useState5","_useState6","offset","setOffset","_useState7","_useState8","comicsEnded","setComicsEnded","_useMarvelService","useMarvelService","setProcess","getAllComics","useEffect","request","initial","then","comicsListLoaded","newComicsList","ended","_toConsumableArray","_jsxs","className","items","map","_ref","i","thumbnail","title","price","id","imgStyle","objectFit","Link","to","src","alt","style","renderComicsItems","disabled","onClick","_Fragment","Helmet","name","content","AppBanner","ComicsList"],"sourceRoot":""}